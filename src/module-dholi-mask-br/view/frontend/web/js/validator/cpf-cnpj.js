define(["jquery","Dholi_Core/js/masks"],function(e,a){var c=null;e.fn.cpfcnpj=function(g){var j=e.extend({mask:false,validate:"cpfcnpj",event:"focusout",handler:e(this),ifValid:null,ifInvalid:null},g);if(j.mask){if(e().mask==null){j.mask=false}else{if(j.validate=="cpf"){e(this).mask("000.000.000-00")}else{if(j.validate=="cnpj"){e(this).mask("00.000.000/0000-00")}else{var k=e(this);var f=["000.000.000-009","00.000.000/0000-00"];var i=(k.val().length>14)?f[1]:f[0];var h={onKeyPress:function(l){i=(l.length>14)?f[1]:f[0];k.mask(i,this)}};e(this).mask(i,h)}}}}return this.each(function(){var l=null;var m=e(this);e(document).on(j.event,j.handler,function(){if(m.val().length==14||m.val().length==18){if(j.validate=="cpf"){l=d(m.val())}else{if(j.validate=="cnpj"){l=b(m.val())}else{if(j.validate=="cpfcnpj"){if(d(m.val())){l=true;c="cpf"}else{if(b(m.val())){l=true;c="cnpj"}else{l=false}}}}}}else{l=false}if(e.isFunction(j.ifValid)){if(l!=null&&l){if(e.isFunction(j.ifValid)){var n=e.Callbacks();n.add(j.ifValid);n.fire(m)}}else{if(e.isFunction(j.ifInvalid)){j.ifInvalid(m)}}}})})};function b(j){if(j==""){return false}var f=[6,5,4,3,2,9,8,7,6,5,4,3,2];if((j=j.replace(/[^\d]/g,"").split("")).length!=14){return false}for(var g=0,h=0;g<12;h+=j[g]*f[++g]){}if(j[12]!=(((h%=11)<2)?0:11-h)){return false}for(var g=0,h=0;g<=12;h+=j[g]*f[g++]){}if(j[13]!=(((h%=11)<2)?0:11-h)){return false}return true}function d(j){if(j==""){return false}if((j=j.replace(/[^\d]/g,"").split("")).length!=11){return false}if(new RegExp("^"+j[0]+"{11}$").test(j.join(""))){return false}for(var g=10,h=0,f=0;g>=2;h+=j[f++]*g--){}if(j[9]!=(((h%=11)<2)?0:11-h)){return false}for(var g=11,h=0,f=0;g>=2;h+=j[f++]*g--){}if(j[10]!=(((h%=11)<2)?0:11-h)){return false}return true}});